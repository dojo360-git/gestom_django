{% extends "core/base.html" %}
{% block title %}Produits{% endblock %}

{% block content %}
<div class="header">
  <div>
    <h2 class="h2">Produits</h2>
    <p class="sub">Liste des produits enregistrés.</p>
  </div>
  <a class="btn btn--primary" href="{% url 'core:product_create' %}">+ Ajouter</a>
</div>

<div class="card">
  <div class="table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Prix</th>
          <th>Stock</th>
          <th class="right">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for p in produits %}
        <tr>
          <td>{{ p.nom }}</td>
          <td>{{ p.prix }} €</td>
          <td>
            {% if p.stock < 5 %}
              <span class="badge badge--low">{{ p.stock }}</span>
            {% else %}
              <span class="badge badge--ok">{{ p.stock }}</span>
            {% endif %}
          </td>
          <td class="right">
            <div class="actions">
              <a class="btn btn--sm" href="{% url 'core:product_update' p.pk %}">Modifier</a>
              <a class="btn btn--sm btn--danger" href="{% url 'core:product_delete' p.pk %}">Supprimer</a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="sub">Aucun produit.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
